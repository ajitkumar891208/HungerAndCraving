<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Website Testing Phases Demo</title>
  <style>
    body{font-family:Arial, sans-serif;background:#f4f7fa;margin:0;padding:0}
    header{background:#2563eb;color:#fff;padding:14px;text-align:center}
    .flow{display:flex;justify-content:center;align-items:center;gap:8px;margin:20px 0;font-weight:bold}
    .flow div{padding:6px 12px;border-radius:6px;background:#e2e8f0;position:relative}
    .flow div.active{background:#2563eb;color:#fff;box-shadow:0 0 8px #2563eb}
    .flow span{font-size:20px;color:#555}
    nav{display:flex;justify-content:center;gap:12px;margin:16px 0}
    nav button{padding:8px 14px;border:0;border-radius:6px;cursor:pointer;background:#e2e8f0}
    nav button.active{background:#2563eb;color:#fff}
    .page{display:none;max-width:500px;margin:20px auto;padding:16px;background:#fff;border-radius:8px;box-shadow:0 4px 8px rgba(0,0,0,0.1)}
    h3{margin-top:0}
    input{display:block;margin:6px 0;padding:6px;width:100%;border:1px solid #ccc;border-radius:4px}
    button.action{margin-top:6px;background:#2563eb;color:#fff;padding:8px 12px;border:0;border-radius:4px;cursor:pointer}
    #loginMsg,#unit2Msg,#intMsg,#c_loginMsg{margin-top:8px;font-weight:bold}
    #logPanel{max-width:600px;margin:20px auto;padding:12px;background:#fff;border-radius:8px;box-shadow:0 4px 8px rgba(0,0,0,0.1)}
    #logPanel h3{margin-top:0}
    .logEntry{padding:4px;border-bottom:1px solid #eee}
    .pass{color:green}
    .fail{color:red}
  </style>
</head>
<body>
  <header>
    <h1>Website Testing Phases Demo</h1>
  </header>

  <!-- Flow Diagram -->
  <div class="flow">
    <div id="flow_unit1">Unit 1</div><span>→</span>
    <div id="flow_unit2">Unit 2</div><span>→</span>
    <div id="flow_integration">Integration</div><span>→</span>
    <div id="flow_complete">Complete</div><span>→</span>
    <div id="flow_perf">Performance</div>
  </div>

  <nav>
    <button onclick="showPage('unit1')" class="active">Unit 1: Login</button>
    <button onclick="showPage('unit2')">Unit 2: Profile</button>
    <button onclick="showPage('integration')">Integration (with Bug)</button>
    <button onclick="showPage('complete')">Complete Website</button>
    <button onclick="showPage('performance')">Performance</button>
  </nav>

  <!-- Unit 1 Testing Page -->
  <div id="unit1" class="page" style="display:block">
    <h3>Unit 1 Test: Login Form</h3>
    <input type="text" placeholder="Username" id="u_username" />
    <input type="password" placeholder="Password" id="u_password" />
    <button class="action" onclick="unitLogin()">Login</button>
    <p id="loginMsg"></p>
  </div>

  <!-- Unit 2 Testing Page -->
  <div id="unit2" class="page">
    <h3>Unit 2 Test: Profile Card</h3>
    <div style="padding:10px;border:1px solid #ddd;border-radius:6px">
      <h4>Profile Card</h4>
      <p>Name: John Doe</p>
      <p>Email: john@example.com</p>
    </div>
    <p id="unit2Msg">✅ Unit 2 works independently</p>
  </div>

  <!-- Integration Testing Page (with bug) -->
  <div id="integration" class="page">
    <h3>Integration Test: Login + Profile</h3>
    <input type="text" placeholder="Username" id="i_username">
    <input type="password" placeholder="Password" id="i_password">
    <button class="action" onclick="doLoginBug()">Login</button>
    <p id="intMsg"></p>

    <div id="i_profile" style="display:none;margin-top:12px;padding:10px;border:1px solid #ddd;border-radius:6px">
      <h4>Profile Card</h4>
      <p>Name: John Doe</p>
      <p>Email: john@example.com</p>
    </div>
  </div>

  <!-- Complete Website (fixed) -->
  <div id="complete" class="page">
    <h3>Complete Website</h3>
    <div id="loginBox">
      <input type="text" placeholder="Username" id="c_username">
      <input type="password" placeholder="Password" id="c_password">
      <button class="action" onclick="doLoginFixed()">Login</button>
      <p id="c_loginMsg"></p>
    </div>

    <div id="c_profile" style="display:none;margin-top:12px;padding:10px;border:1px solid #ddd;border-radius:6px">
      <h4>Profile Card</h4>
      <p>Name: John Doe</p>
      <p>Email: john@example.com</p>
      <button class="action" onclick="logout()">Logout</button>
    </div>
  </div>

  <!-- Performance Testing -->
  <div id="performance" class="page">
    <h3>Performance & Stress Test</h3>
    <button class="action" onclick="simulatePerformance()">Run Performance Test (5 attempts)</button>
    <button class="action" onclick="simulateStress()">Run Stress Test (100 attempts)</button>
  </div>

  <!-- Visual Log Panel -->
  <div id="logPanel">
    <h3>Test Log</h3>
    <div id="logEntries"></div>
  </div>

  <script>
    function setActiveFlow(id){
      document.querySelectorAll('.flow div').forEach(f=>f.classList.remove('active'))
      document.getElementById('flow_'+id).classList.add('active')
    }

    // Navigation
    function showPage(id){
      document.querySelectorAll('.page').forEach(p=>p.style.display='none')
      document.getElementById(id).style.display='block'
      document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'))
      event.target.classList.add('active')
      setActiveFlow(id)
    }

    function logResult(msg, status){
      let entry = document.createElement('div')
      entry.className = 'logEntry ' + (status? 'pass':'fail')
      entry.innerText = (status? 'PASS: ':'FAIL: ') + msg
      document.getElementById('logEntries').prepend(entry)
    }

    // Unit 1
    function unitLogin(){
      let user = document.getElementById("u_username").value;
      let pass = document.getElementById("u_password").value;
      if(user === "test" && pass === "1234"){
        document.getElementById("loginMsg").innerText = "✅ Unit 1 Login works!";
        logResult("Unit 1 login success", true)
      } else {
        document.getElementById("loginMsg").innerText = "❌ Wrong credentials";
        logResult("Unit 1 login failed", false)
      }
    }

    // Integration Test (with Bug)
    function doLoginBug(){
      let user = document.getElementById("i_username").value;
      let pass = document.getElementById("i_password").value;
      try{
        // Intentional bug: wrong variable name 'pas'
        if(user === "test" && pass === "1234"){
          document.getElementById("i_profile").style.display = "block";
          document.getElementById("intMsg").innerText = "✅ Integrated Login works!";
          logResult("Integration success", true)
        } else {
          document.getElementById("intMsg").innerText = "❌ Integration failed! (bug triggered)";
          logResult("Integration failed (bug)", false)
        }
      }catch(e){
        document.getElementById("intMsg").innerText = "❌ Crash due to bug";
        logResult("Integration crashed: "+e.message, false)
      }
    }

    // Complete Website (Fixed)
    function doLoginFixed(){
      let user = document.getElementById("c_username").value;
      let pass = document.getElementById("c_password").value;
      if(user === "test" && pass === "1234"){
        document.getElementById("c_profile").style.display = "block";
        document.getElementById("loginBox").style.display = "none";
        logResult("Complete website login success", true)
      } else {
        document.getElementById("c_loginMsg").innerText = "❌ Wrong credentials";
        logResult("Complete website login failed", false)
      }
    }

    function logout(){
      document.getElementById("c_profile").style.display = "none";
      document.getElementById("loginBox").style.display = "block";
      document.getElementById("c_username").value = "";
      document.getElementById("c_password").value = "";
      document.getElementById("c_loginMsg").innerText = "";
      logResult("User logged out", true)
    }

    // Performance Test
    async function simulatePerformance(){
      let times=[];
      for(let i=0;i<5;i++){
        let start=performance.now();
        await new Promise(r=>setTimeout(r,Math.random()*300+100));
        let end=performance.now();
        times.push(end-start);
        logResult("Performance attempt "+(i+1)+": "+Math.round(end-start)+"ms", true)
      }
      let avg=times.reduce((a,b)=>a+b,0)/times.length;
      logResult("Average response time: "+Math.round(avg)+"ms", true)
    }

    async function simulateStress(){
      let fails=0;let times=[];
      for(let i=0;i<100;i++){
        let start=performance.now();
        await new Promise(r=>setTimeout(r,Math.random()*50+20));
        let end=performance.now();
        let success=Math.random()>0.05;
        if(!success) fails++;
        times.push(end-start)
      }
      let avg=times.reduce((a,b)=>a+b,0)/times.length;
      logResult("Stress test done. Avg "+Math.round(avg)+"ms, fails: "+fails+"/100", fails===0)
    }
  </script>
</body>
</html>
